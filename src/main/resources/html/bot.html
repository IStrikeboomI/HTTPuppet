<!DOCTYPE HTML>
<html>
    <head>
        <title>HTTPuppet</title>
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    </head>
    <body>
    <div id="guilds">
    <span>Choose Server:</span>
        <select name="guilds" id="guildList">

        </select>
    </div>
    <script>
       fetch('/guilds.json')
       .then(response => {
           if (!response.ok) {
               throw new Error("HTTP error " + response.status);
           }
        return response.json();
       })
       .then(json => {
           addJsonToSelect(json);
       })
       .catch(function() {
           console.log("ERROR!");
       })

        function addJsonToSelect(JSONdata) {
            const select = document.getElementById('guildList');
            for (let i = 0; i < JSONdata.length; i++){
                var opt = document.createElement('option');
                opt.value = JSONdata[i].name;
                opt.innerHTML = JSONdata[i].name;
                select.appendChild(opt);
            }
        }
    </script>
    </body>
</html>